# ZKP-SOUL-BOUND-TOKEN

Library to issue Private Soul Bound Token and verify it on-chain. The library leverages @iden3 go-libraries and circuits.

The core data structure to represent the information that wants to be kept private is defined claim. A claim can encompass any type of information about a subject. The Soul Bound Token contains an hash of the signed claim. The owner of the Soul Bound Token can therefore prove information about the claim without revealing it.

The 3 main actors involved in the process are: 

- An issuer, attests someone's age and issues SBT 
- An ID holder, who receives a SBT from the issuer
- A verifier, who opens an airdrop only to 18+ users.  

// ADD illustration here. Specify on-chain and off-chain processes

Process 

A) Design the claim => Add reference to iden3 to design the claim. Explain which type of claim I used here
B) Sign the claim => Explain the key used and why.
C) Deploy NFT contract and transfer it. Create the NFT that includes an hash of the signature in it. Note: the hash of the signature is generated as keccak-256 hash of "sigR8x" + "." + "sigR8y" + "." + "sigS"
D) Generate the input for the circuits. Add go files for that
E) Deploy verifier 
F) Deploy Airdrop contract


### Circuits

### Contracts

### Scripts

- to compile the circuit: bash scripts/compile-circuit.sh circuits/sbt-query.circom powersOfTau28_hez_final_15.ptau 
- add input.json to build/sbt-query/sbt-query_js
- bash scripts/generate.sh sbt-query
- to export solidity calldata snarkjs zkey export soliditycalldata public.json proof.json

### Test

### Design choices

- This library uses babyjubjub signature schema. This schema is more zkp friendly and require far less computation to verify signature inside a circuit. Theoretically, ECDSA schema are already usable inside circuit but the proof generation currently requires a device with 56GB RAM (link to 0xParc Library).
- Iden3's claim schema is much more expandable and can include more complex data information (up to 4 data slots) and features such as expiration and revocation
- Non ready for production 
- Use ERC-4973 incoming, 
- Expand the smart contract

### To-do

- Create a NFT with hash (done!)
- // Set up hardhat 
- Export solidity calldata add it inside the script
- Add on-chain verification with query
- Add nullifier
- Modify package.json
- Check licensing
- Add off-zkp more verification inside the contract 
    - Hash in the NFT has to be equal to the hash of the signature.
- Make the verifyProof function non public! 



Solidity call data 

["0x24b8a39f07e15a989eb35ffa72981e56d7966c8d8552a3a2475a5ac07b20d842", "0x2460a79e8d261c0f84858cb6401db0175b016cb73bb0b703aa02812189adc0a3"]
[["0x1dadb83a89c6dc248bf2e247028dda27f2988a1363a4c073f5d4ddc3e3821b62", "0x0265236f12a781629d06878a1ccc394f636becd3bbc583bd66c98e61d72faaf0"],["0x0e0f765599d920622a9bf0eb8ac4f07d66053ffe1a9cf9eb23acaf3dd71d8484", "0x1bbedb9512924e10592fed14eb72916330d4e57fb997b6d4adab2490861fa29b"]]
["0x10c2f01eb8930d7ca5ff4b614f63f614a805ccc26693197c0eb2bb55546e3100", "0x23cf3dd139b3bf8b6eb66716ebbf08b6b4cda2bae8e58d31fdf2fce608b944c8"]

["0x0bb16e59a25fb48b6b644fd1f98e022ab0938a33c9fffd8d11792e1bd7ff4643","0x0a49b981a887e4a7f69268120a574137424a46a5f3d40a1a3069a3d7936c847f","0x00c005afcdc4fe33f89f6d822a96f53151a630373803cdcb2ec0c15734ab04cf","0x152f5044240ef872cf7e6742fe202b9e07ed6188e9e734c09b06939704852358","0x2865441cd3e276643c84e55004ad259dff282c8c47c6e8c151afacdadf6f6db3","0x0000000000000000000000000000000087b9b4c689c2024c54d1bf962cb16bce","0x0000000000000000000000000000000000000000000000000000000000000002","0x0000000000000000000000000000000000000000000000000000000000000002","0x0000000000000000000000000000000000000000000000000000000000000012","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000"]